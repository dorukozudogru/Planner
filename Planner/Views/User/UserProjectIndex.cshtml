
@model IEnumerable<Planner.Models.Project>

@{
    ViewBag.Title = "Projelerim";
    Layout = "~/views/Shared/_LayoutLogged.cshtml";
}

<div class="panel">
    <header class="panel-heading">
        <div class="panel-actions"></div>
        <h3 class="panel-title">Projelerim</h3>
    </header>
    <div class="panel-body">
        <table class="table table-hover dataTable table-striped w-full" data-plugin="dataTable">
            <thead>
                <tr>
                    <th>Adı</th>
                    <th>Açıklama</th>
                    <th>Onay & Destek</th>
                    <th>Düzenle</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                <tr>
                    <td style="vertical-align:middle">@Html.DisplayFor(modelItem => item.Name)</td>
                    <td style="max-width:30px; vertical-align:middle">@Html.TextAreaFor(modelItem => item.Description, 0, 45, new { htmlAttributes = new { @class = "form-control text-center" } })</td>
                    @if (item.IsApproved == 0 && (item.IsApproveChanged != 2 || item.IsApproveChanged != 4))
                    {
                        <td style="vertical-align:middle"><a href="@Url.Action("SendProjectToApprove", "Project", new { id = item.Id })" class="btn btn-warning btn-block">Onaya Gönder</a></td>
                        <td style="vertical-align:middle"><a href="@Url.Action("Edit", "Project", new { id = item.Id })" class="btn btn-dark btn-block">Düzenle</a></td>
                    }
                    @if (item.IsApproved == 0 && (item.IsApproveChanged == 2 || item.IsApproveChanged == 4))
                    {
                        <td style="vertical-align:middle">Proje Onaylanmamıştır</td>
                        <td></td>
                    }
                    @if (item.IsApproved == 1 && (item.IsApproveChanged != 2 || item.IsApproveChanged != 4))
                    {
                        <td style="vertical-align:middle"><a class="btn btn-info btn-block text-white disabled">Onay Bekliyor</a></td>
                        <td></td>
                    }
                    @if (item.IsApproved == 2)
                    {
                        if (item.IsSupported == 0 && (item.IsApproveChanged != 2 || item.IsApproveChanged != 4))
                        {
                            <td style="vertical-align:middle"><a href="@Url.Action("SendProjectToSupport", "Project", new { id = item.Id })" class="btn btn-success">Destek Başvurusu Yap</a></td>
                            <td></td>
                        }
                        if (item.IsSupported == 0 && (item.IsApproveChanged == 2 || item.IsApproveChanged == 4))
                        {
                            <td style="vertical-align:middle">Proje Desteklenmemiştir</td>
                            <td></td>
                        }
                        if (item.IsSupported == 1 && (item.IsApproveChanged != 2 || item.IsApproveChanged != 4))
                        {
                            <td style="vertical-align:middle"><a class="btn btn-secondary btn-block text-white disabled">Destek Onayı Bekliyor</a></td>
                            <td></td>
                        }
                        if (item.IsSupported == 2)
                        {
                            <td style="vertical-align:middle">Desteklendi</td>
                        }
                    }
                    <td style="vertical-align:middle"><a href="@Url.Action("Download", "Project", new { id = item.Id })" target="_blank" class="btn btn-info"><span class="fa fa-search"></span></a></td>
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>